Нужно добавить в проект SecureLex страницу личного кабинета /personal-data и функциональность отзыва согласия/удаления аккаунта.

1. Frontend: страница /personal-data
1.1. Создай новую страницу/route в React (в клиентской части проекта), доступную только авторизованным пользователям, например:

путь: /personal-data;

название раздела: “Персональные данные и согласия”.

1.2. На странице получай данные текущего пользователя с backend (скорее всего, через уже существующий эндпоинт /api/auth/me или аналог):

отобрази:

e‑mail пользователя;

дату pdnConsentAt (в человеко‑читаемом виде) или фразу “согласие не зафиксировано”;

статус marketingConsent (“подписан на новости” / “не подписан”).

1.3. Добавь текстовый блок (объяснение по смыслу, можно кратко), например:

что здесь отображается информация о согласии на обработку ПДн и рассылки;

что отзыв согласия и удаление аккаунта приведёт к удалению персональных данных и потере доступа к личному кабинету/отчётам (опиши так, как уже реализовано в бизнес‑логике).

1.4. Добавь кнопку:

основная кнопка: «Отозвать согласие и удалить аккаунт» (или аналогичный короткий текст).

При нажатии показывать модальное окно подтверждения с понятным текстом последствий.

1.5. При подтверждении:

вызывай новый backend‑эндпоинт (см. ниже) методом DELETE;

после успешного ответа:

разлогинь пользователя на фронте (очистка auth‑состояния);

перенаправь на страницу входа или главную с коротким сообщением.

2. Backend: эндпоинт удаления аккаунта/отзыва согласия
2.1. В server/routes.ts добавь новый защищённый маршрут:

DELETE /api/me

доступен только авторизованным пользователям (requireAuth).

2.2. Логика внутри:

определить текущего пользователя по req.session.userId;

вызвать соответствующий метод в storage, например storage.deleteUserOrAnonymize(userId):

если в проекте уже есть логика “мягкого удаления”/анонимизации — используй её;

если нет, реализуй аккуратно:

либо физически удаляй пользователя и связанные сущности,

либо обнуляй/анонимизируй ПДн (ФИО, телефон и т.п.) и помечай аккаунт как удалённый.

удалить/разрушить сессию пользователя (req.session.destroy + очистка cookie, если нужно).

вернуть JSON, например: { success: true }.

2.3. Не меняй формат уже существующих auth‑эндпоинтов, просто добавь новый.

3. Storage‑слой
3.1. В server/storage.ts добавь функцию, которую будет вызывать route:

ts
async function deleteUserOrAnonymize(userId: number) {
  // Реализуй безопасное удаление/анонимизацию:
  // - если архитектура допускает физическое удаление — удали пользователя и связанные сущности;
  // - если нужны отчёты/логи — обнуляй ПДн (ФИО, телефон и т.п.), но оставляй технические записи,
  //   при этом не храни больше идентифицирующую информацию.
}
3.2. Реализуй эту функцию в соответствии с текущей моделью БД (Drizzle схемами), не ломая целостность ссылок.

4. Требования
Страница /personal-data должна использовать существующий layout/кабинет и быть доступной из меню профиля (добавь ссылку “Персональные данные” там, где это уместно).

Все новые тексты делай краткими и понятными, без попытки впихнуть длинные юридические формулировки.

Не меняй существующую авторизацию/регистрацию, только добавь новый функционал.

В конце перечисли изменённые файлы и кратко опиши:

как попасть на /personal-data;

какой эндпоинт вызывается при удалении аккаунта;

что именно происходит в storage при удалении/анонимизации.

Не добавляй сторонние библиотеки, используй уже подключённые UI‑компоненты и инструменты роутинга.