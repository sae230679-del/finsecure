# –ü–õ–ê–¢–ï–ñ–ù–ê–Ø –°–ò–°–¢–ï–ú–ê - SecureLex.ru

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** 10 –¥–µ–∫–∞–±—Ä—è 2025  

---

## üí≥ –Ø–ù–î–ï–ö–°.–ö–ê–°–°–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

```
Env vars:
YANDEX_KASSA_SHOP_ID=123456
YANDEX_KASSA_SECURE_TOKEN=test_xxxxx
YANDEX_KASSA_MODE=test (–∏–ª–∏ production)
```

**–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:**
- üí≥ –ö–∞—Ä—Ç–∞ (Visa, Mastercard)
- üçé Apple Pay
- ü§ñ Google Pay
- üè™ –Ø–Ω–¥–µ–∫—Å.–ö–æ—à–µ–ª—ë–∫

---

## üõí –ü–†–û–¶–ï–°–° –û–ü–õ–ê–¢–´

### 1. –í—ã–±–æ—Ä –ø–∞–∫–µ—Ç–∞
- –í–≤–µ—Å—Ç–∏ URL (any format: example.com, www.example.com, https://...)
- –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –∏–∑ dropdown
- –¶–µ–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏

### 2. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞
- 3 —Å–ø–æ—Å–æ–±–∞: –≠–¶–ü, Email, –†—É—á–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ

### 3. –Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å–∞
```javascript
POST /payments
{
  "audit_id": 456,
  "package_id": 789,
  "amount": 3900,
  "currency": "RUB"
}

Response: {
  "id": "27d6ba2f-000f-5000-9000...",
  "confirmation_url": "https://yandex.kassa.ru/payments/..."
}
```

### 4. Webhook –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞
```javascript
POST /payments/webhook

Backend:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å
2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞—É–¥–∏—Ç
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å email
```

---

## üí∞ –†–ê–ó–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò

**–°—Ü–µ–Ω–∞—Ä–∏–π 1:** –û–ø–ª–∞—Ç–∞ –ø–∞–∫–µ—Ç–∞ (3,900-39,900 ‚ÇΩ)
```
–í—ã–±—Ä–∞—Ç—å –ø–∞–∫–µ—Ç ‚Üí –ü–ª–∞—Ç–∏—Ç—å ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 2:** –û–ø–ª–∞—Ç–∞ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ (900 ‚ÇΩ)
```
–ü–æ—Å–ª–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –æ—Ç—á–µ—Ç–∞ ‚Üí "–ö—É–ø–∏—Ç—å –ø–æ–ª–Ω—ã–π" ‚Üí –ü–ª–∞—Ç–∏—Ç—å ‚Üí PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 3:** –†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–¥–æ–≥–æ–≤–æ—Ä)
```
SuperAdmin –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ ‚Üí Mark as "paid" ‚Üí –ê—É–¥–∏—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```

---

**–í–µ—Ä—Å–∏—è:** 2.0 ‚úÖ
